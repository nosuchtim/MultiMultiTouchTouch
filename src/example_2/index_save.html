<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>MMTT - Graphics</title>
    <script src="js/jquery-1.5.2.js" type="text/javascript"></script>
    <script src="js/ui/jquery.ui.core.js" type="text/javascript"></script>
    <script src="js/ui/jquery.ui.widget.js" type="text/javascript"></script>
    <script src="js/ui/jquery.ui.mouse.js" type="text/javascript"></script>
    <script src="js/ui/jquery.ui.button.js" type="text/javascript"></script>
    <script src="js/ui/jquery.ui.slider.js" type="text/javascript"></script>
    <script src="js/ui/jquery.ui.datepicker.js" type="text/javascript"></script>
    <link href="css/demos.css" rel="stylesheet" type="text/css" />
    <style type="test/css">
	    td.tableCell { padding: 5px; }
    </style>
<script>

function createTable(div_id,rows) {
	var $b = $('<button>')
		.attr('id','jsontest2')
		.text("JSON test 2");
	$('#buttontest').append($b);

	var $tbl = $("<table>")
		.attr('id', 'basicTable')
		.attr('width', 200)
		.attr('border', 1);
	for (var r=1; r<=rows; r++) {
		var $cellid = "jsontest"+r;
		var $butt2 = $('<button>')
			.attr('id',$cellid)
			.text("Button "+$cellid)
			.click( {"row":r,"col":44}, buttonClickNew );
		var $div1id = "div"+r;
		var $div1 = $('<div>')
			.button()
			.attr('id',$div1id)
			.click( {"row":-2,"col":77}, buttonNewest )
			.text("DIVBUTT");
		var $td1 = $('<td>')
			.append($div1);
		var $td2 = $('<td>')
			.append($butt2);
		$tbl.append(
	       		$("<tr>")
				.append(
					$('<td>')
						.attr('align','center')
						.attr('width',100)
						.text(r),
					$td1,
					$td2,
					$('<td>').text("two")
					)
			);
	}
	div_id.append($tbl);
	$('#mybutt')
		.button()
		.text("foooey!")
		.click( {"row":-1,"col":88}, buttonNewest );
	$('#slider').slider();
}

function buttonClick() {
            $('<p/>', { html: "begin test" }).appendTo('body');
	    var id = "12345";
            $.ajax({ url: "test.txt",
		type: "POST",
		data: "{ \"jsonrpc\": \"2.0\", \"method\": \"_echo\", \"params\":{\"value\":\"fooey\"}, \"id\":\""+id+"\" }\n",
		async: false,
                success: function (result) {
                    $('<p/>', { html: "TEST1 WORKED result="+result }).appendTo('body');
                }, 
                error: function (result) {
                    $('<p/>', { html: "TEST1 ERROR" }).appendTo('body');
                },
                complete: function (result) {
                    $('<p/>', { html: "TEST1 COMPLETE" }).appendTo('body');
                } 
            });
            $('<p/>', { html: "end test" }).appendTo('body');
}
function buttonNewest(event) {
	alert("Newest! row="+event.data.row);
}
function buttonClickNew(event) {
            $('<p/>', { html: "begin test NEW r="+event.data.row+" c="+event.data.col }).appendTo('body');
	    var id = "12345";
            $.ajax({ url: "test.txt",
		type: "POST",
		data: "{ \"jsonrpc\": \"2.0\", \"method\": \"_echo\", \"params\":{\"value\":\"fooey\"}, \"id\":\""+id+"\" }\n",
		async: false,
                success: function (result) {
                    $('<p/>', { html: "TEST1 WORKED result="+result }).appendTo('body');
                }, 
                error: function (result) {
                    $('<p/>', { html: "TEST1 ERROR" }).appendTo('body');
                },
                complete: function (result) {
                    $('<p/>', { html: "TEST1 COMPLETE" }).appendTo('body');
                } 
            });
            $('<p/>', { html: "end test NEW" }).appendTo('body');
}
    $(document).ready(function () {
	createTable($("#params"), 7);
        $("#jsontest1").click(buttonClick);
        $("#jsontest2").click(buttonClick);
        // $('<p/>', { html: "Table start" }).appendTo('#paramtable');
	
    });
</script>
</head>
<body>
JSON test page

<div id="buttontest"></div>
<div id="params"></div>
<div id="slider"></div>
<div id="mybutt"></div>

</body>
</html>
